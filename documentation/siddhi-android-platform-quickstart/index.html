
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Stream Processing in Android">
      
      
        <link rel="canonical" href="https://wso2.github.io/siddhi-android-platform/documentation/siddhi-android-platform-quickstart/">
      
      
        <meta name="author" content="WSO2">
      
      
        <link rel="shortcut icon" href="../../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.1">
    
    
      
        <title>Quick Start Guide - Siddhi Android Platform</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-4d0d3f2fbf.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-f78e5cb881.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://wso2.github.io/siddhi-android-platform" title="Siddhi Android Platform" class="md-logo md-header-nav__button">
            <img src="../../images/siddhi-logo-w.svg" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Quick Start Guide
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/wso2/siddhi-android-platform" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      WSO2 Siddhi Android Platform
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../images/siddhi-logo-w.svg">
      </i>
    
    Siddhi Android Platform
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wso2/siddhi-android-platform" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      WSO2 Siddhi Android Platform
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome to Siddhi Android Platform" class="md-nav__link">
      Welcome to Siddhi Android Platform
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Quick Start Guide
      </label>
    
    <a href="./" title="Quick Start Guide" class="md-nav__link md-nav__link--active">
      Quick Start Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-creating-android-project" title="Step 1: Creating Android Project" class="md-nav__link">
    Step 1: Creating Android Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-add-required-repositories-to-project-buildgradle" title="Step 2: Add required repositories to project build.gradle" class="md-nav__link">
    Step 2: Add required repositories to project build.gradle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-add-required-dependencies-to-module-buildgradle" title="Step 3: Add required dependencies to module build.gradle" class="md-nav__link">
    Step 3: Add required dependencies to module build.gradle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-set-build-configurations-for-the-app" title="Step 4: Set build configurations for the app" class="md-nav__link">
    Step 4: Set build configurations for the app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-build-user-interface" title="Step 5: Build user interface" class="md-nav__link">
    Step 5: Build user interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-bind-with-the-siddhi-android-platform-service" title="Step 6: Bind with the Siddhi Android Platform Service" class="md-nav__link">
    Step 6: Bind with the Siddhi Android Platform Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-implement-functionality" title="Step 7: Implement Functionality" class="md-nav__link">
    Step 7: Implement Functionality
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-creating-android-project" title="Step 1: Creating Android Project" class="md-nav__link">
    Step 1: Creating Android Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-add-required-repositories-to-project-buildgradle" title="Step 2: Add required repositories to project build.gradle" class="md-nav__link">
    Step 2: Add required repositories to project build.gradle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-add-required-dependencies-to-module-buildgradle" title="Step 3: Add required dependencies to module build.gradle" class="md-nav__link">
    Step 3: Add required dependencies to module build.gradle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-set-build-configurations-for-the-app" title="Step 4: Set build configurations for the app" class="md-nav__link">
    Step 4: Set build configurations for the app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-build-user-interface" title="Step 5: Build user interface" class="md-nav__link">
    Step 5: Build user interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-bind-with-the-siddhi-android-platform-service" title="Step 6: Bind with the Siddhi Android Platform Service" class="md-nav__link">
    Step 6: Bind with the Siddhi Android Platform Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-implement-functionality" title="Step 7: Implement Functionality" class="md-nav__link">
    Step 7: Implement Functionality
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Quick Start Guide</h1>
                
                <p>Android Siddhi Platform provides a android service that can execute Siddhi apps. Siddhi apps has capability of gathering data and events, process them and trigger actions. By this platform those capabilities are extended to Android environment.  </p>
<h4 id="step-1-creating-android-project">Step 1: Creating Android Project<a class="headerlink" href="#step-1-creating-android-project" title="Permanent link">&para;</a></h4>
<ul>
<li>Create Android App with the minimum API level 19
<img alt="" src="../../images/tutorial/create-project.png?raw=true" title="Overview" />
<img alt="" src="../../docs/images/tutorial/create-project.png?raw=true" title="Overview" /></li>
</ul>
<p><img alt="" src="../../images/tutorial/target-project.png?raw=true" title="Overview" />
<img alt="" src="../../docs/images/tutorial/target-project.png?raw=true" title="Overview" /></p>
<p><img alt="" src="../../images/tutorial/select-project.png?raw=true" title="Overview" />
<img alt="" src="../../docs/images/tutorial/select-project.png?raw=true" title="Overview" /></p>
<p><img alt="" src="../../images/tutorial/activity-project.png?raw=true" title="Overview" />
<img alt="" src="../../docs/images/tutorial/activity-project.png?raw=true" title="Overview" /></p>
<h4 id="step-2-add-required-repositories-to-project-buildgradle">Step 2: Add required repositories to project build.gradle<a class="headerlink" href="#step-2-add-required-repositories-to-project-buildgradle" title="Permanent link">&para;</a></h4>
<p>To the Project level build gradle add WSO2 nexus repository and the jitpack repository</p>
<div class="codehilite"><pre><span></span><span class="n">allprojects</span> <span class="o">{</span>
   <span class="n">repositories</span> <span class="o">{</span>
       <span class="n">google</span><span class="o">()</span>
       <span class="n">jcenter</span><span class="o">()</span>
       <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s1">&#39;http://maven.wso2.org/nexus/content/groups/wso2-public/&#39;</span> <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h4 id="step-3-add-required-dependencies-to-module-buildgradle">Step 3: Add required dependencies to module build.gradle<a class="headerlink" href="#step-3-add-required-dependencies-to-module-buildgradle" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.siddhi:siddhi-core:4.0.0-M86&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">annotationProcessor</span><span class="o">(</span><span class="s1">&#39;org.wso2.siddhi:siddhi-annotations:4.0.0-M86&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.siddhi:siddhi-annotations:4.0.0-M86&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.siddhi:siddhi-query-api:4.0.0-M86&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.siddhi:siddhi-query-compiler:4.0.0-M86&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.extension.siddhi.map.text:siddhi-map-text:1.0.2&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.wso2.extension.siddhi.map.keyvalue:siddhi-map-keyvalue:1.0.1&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span> <span class="s2">&quot;com.google.guava:guava:19.0&quot;</span>
<span class="n">implementation</span><span class="o">(</span><span class="s2">&quot;org.apache.log4j.wso2:log4j:1.2.17.wso2v1&quot;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transitive</span> <span class="o">=</span> <span class="kc">false</span>
<span class="o">}</span>
<span class="n">implementation</span> <span class="s2">&quot;org.osgi:org.osgi.core:6.0.0&quot;</span>
<span class="n">implementation</span> <span class="s2">&quot;org.wso2.orbit.com.lmax:disruptor:3.3.2.wso2v2&quot;</span>
<span class="n">implementation</span> <span class="s2">&quot;org.antlr:antlr4-runtime:4.5.1&quot;</span>
</pre></div>


<p>Next you have to add android libraries Siddhi Android Platfoorm and Siddhi IO Android. To add these you can either locally build them or get from the public repository.
To get from public repository add following dependencies</p>
<div class="codehilite"><pre><span></span><span class="n">implementation</span> <span class="s1">&#39;org.wso2.siddhi.android.platform:siddhi-android-platform:1.0.0&#39;</span>
<span class="n">implementation</span> <span class="s1">&#39;org.wso2.siddhi.extension.io.android:siddhi-io-android:1.0.0&#39;</span>
</pre></div>


<p>To locally build, clone the required repos and do a gradle build </p>
<div class="codehilite"><pre><span></span>git clone https://github.com/wso2-extensions/siddhi-io-android.git
git clone https://github.com/wso2/siddhi-android-platform.git
</pre></div>


<p>Then execute gradle build command. This will create aar files in build/outpus/aar directory. 
Then from android studio add these aar files to your project. </p>
<p><img alt="" src="../../images/tutorial/aar.png?raw=true" title="Overview" />
<img alt="" src="../../docs/images/tutorial/aar.png?raw=true" title="Overview" /></p>
<h4 id="step-4-set-build-configurations-for-the-app">Step 4: Set build configurations for the app<a class="headerlink" href="#step-4-set-build-configurations-for-the-app" title="Permanent link">&para;</a></h4>
<p>Set packaging options </p>
<div class="codehilite"><pre><span></span><span class="n">compileOptions</span> <span class="o">{</span>
   <span class="n">sourceCompatibility</span> <span class="n">JavaVersion</span><span class="o">.</span><span class="na">VERSION_1_8</span>
   <span class="n">targetCompatibility</span> <span class="n">JavaVersion</span><span class="o">.</span><span class="na">VERSION_1_8</span>
<span class="o">}</span>
<span class="n">packagingOptions</span> <span class="o">{</span>
   <span class="n">pickFirst</span> <span class="s1">&#39;META-INF/DEPENDENCIES&#39;</span>
   <span class="n">merge</span> <span class="s1">&#39;META-INF/annotations/org.wso2.siddhi.annotation.Extension&#39;</span>
<span class="o">}</span>
</pre></div>


<p>To enable multidex add following lines to defaultConfig block in the module level build.gradle. </p>
<div class="codehilite"><pre><span></span><span class="n">multiDexEnabled</span> <span class="kc">true</span>
<span class="n">android</span><span class="o">.</span><span class="na">defaultConfig</span><span class="o">.</span><span class="na">javaCompileOptions</span><span class="o">.</span><span class="na">annotationProcessorOptions</span><span class="o">.</span><span class="na">includeCompileClasspath</span> <span class="o">=</span> <span class="kc">true</span>
</pre></div>


<p>Now you are ready to execute Siddhi Apps in Android Platform. </p>
<h4 id="step-5-build-user-interface">Step 5: Build user interface<a class="headerlink" href="#step-5-build-user-interface" title="Permanent link">&para;</a></h4>
<p>Create the user interface to start and stop the Siddhi App. Edit the layout for MainActivity. </p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;android.support.constraint.ConstraintLayout</span>
       <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
       <span class="na">xmlns:tools=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
       <span class="na">xmlns:app=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
       <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
       <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
       <span class="na">tools:context=</span><span class="s">&quot;com.example.chamath.simplesiddhi.MainActivity&quot;</span><span class="nt">&gt;</span>

   <span class="nt">&lt;Button</span>
           <span class="na">android:text=</span><span class="s">&quot;Start App&quot;</span>
           <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
           <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
           <span class="na">android:id=</span><span class="s">&quot;@+id/button2&quot;</span>
           <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span> <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">&quot;parent&quot;</span>
           <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&quot;parent&quot;</span> <span class="na">android:layout_marginEnd=</span><span class="s">&quot;8dp&quot;</span>
           <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&quot;parent&quot;</span> <span class="na">android:layout_marginStart=</span><span class="s">&quot;8dp&quot;</span>
           <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">&quot;parent&quot;</span> <span class="na">android:layout_marginBottom=</span><span class="s">&quot;8dp&quot;</span>
           <span class="na">app:layout_constraintHorizontal_bias=</span><span class="s">&quot;0.501&quot;</span>
           <span class="na">app:layout_constraintVertical_bias=</span><span class="s">&quot;0.398&quot;</span> <span class="na">android:onClick=</span><span class="s">&quot;startApp&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;Button</span>
           <span class="na">android:text=</span><span class="s">&quot;Stop App&quot;</span>
           <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
           <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
           <span class="na">android:id=</span><span class="s">&quot;@+id/button3&quot;</span>
           <span class="na">android:layout_marginTop=</span><span class="s">&quot;8dp&quot;</span> <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&quot;@+id/button2&quot;</span>
           <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&quot;parent&quot;</span> <span class="na">android:layout_marginEnd=</span><span class="s">&quot;8dp&quot;</span>
           <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&quot;parent&quot;</span> <span class="na">android:layout_marginStart=</span><span class="s">&quot;8dp&quot;</span>
           <span class="na">android:onClick=</span><span class="s">&quot;stopApp&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/android.support.constraint.ConstraintLayout&gt;</span>
</pre></div>


<h4 id="step-6-bind-with-the-siddhi-android-platform-service">Step 6: Bind with the Siddhi Android Platform Service<a class="headerlink" href="#step-6-bind-with-the-siddhi-android-platform-service" title="Permanent link">&para;</a></h4>
<p>To execute Siddhi Apps, SimpleSiddhi App should be connected to the Android SiddhiService and then get a reference to that service so it can execute methods. For that first create required SiddhiAppController instance and ServiceConnection objects. </p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="n">SiddhiAppController</span> <span class="n">appController</span><span class="o">;</span>
<span class="kd">private</span> <span class="n">ServiceConnection</span> <span class="n">serviceConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServiceConnection</span><span class="o">()</span> <span class="o">{</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceConnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">name</span><span class="o">,</span> <span class="n">IBinder</span> <span class="n">service</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">appController</span> <span class="o">=</span> <span class="n">SiddhiAppController</span><span class="o">.</span><span class="na">Stub</span><span class="o">.</span><span class="na">asInterface</span><span class="o">(</span><span class="n">service</span><span class="o">);</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onServiceDisconnected</span><span class="o">(</span><span class="n">ComponentName</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">appController</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">};</span>
</pre></div>


<p>Then invoke the service in onCreate of the Activity. </p>
<div class="codehilite"><pre><span></span><span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">SiddhiAppService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">startService</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
<span class="n">bindService</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span><span class="n">serviceConnection</span><span class="o">,</span><span class="n">BIND_AUTO_CREATE</span><span class="o">);</span>
</pre></div>


<h4 id="step-7-implement-functionality">Step 7: Implement Functionality<a class="headerlink" href="#step-7-implement-functionality" title="Permanent link">&para;</a></h4>
<p>Create the Siddhi App </p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="n">String</span> <span class="n">app</span> <span class="o">=</span> <span class="s">&quot;@app:name(&#39;foo&#39;)@source(type=&#39;android-humidity&#39;, @map(type=&#39;keyvalue&#39;,&quot;</span> <span class="o">+</span>
       <span class="s">&quot;fail.on.missing.attribute=&#39;false&#39;,@attributes(sensor=&#39;sensor&#39;,vector=&#39;humidity&#39;)))&quot;</span> <span class="o">+</span>
       <span class="s">&quot;define stream sensorInStream ( sensor string, vector float);&quot;</span> <span class="o">+</span>
       <span class="s">&quot;@sink(type=&#39;android-notification&#39; , title=&#39;Details&#39;,multiple.notifications = &#39;true&#39;,&quot;</span> <span class="o">+</span>
       <span class="s">&quot; @map(type=&#39;keyvalue&#39;))define stream outputStream (sensor string, vector float); &quot;</span> <span class="o">+</span>
       <span class="s">&quot;from sensorInStream select * insert into outputStream&quot;</span><span class="o">;</span>
</pre></div>


<p>And finally you implement the startApp and stopApp functions.</p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="n">String</span> <span class="n">appName</span><span class="o">;</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startApp</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">RemoteException</span><span class="o">{</span>
   <span class="n">appName</span> <span class="o">=</span> <span class="n">appController</span><span class="o">.</span><span class="na">startSiddhiApp</span><span class="o">(</span><span class="n">app</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">stopApp</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">RemoteException</span><span class="o">{</span>
   <span class="n">appController</span><span class="o">.</span><span class="na">stopSiddhiApp</span><span class="o">(</span><span class="n">appName</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>Run the app in emulator. Click the Send App button it will execute the app and will generate notifications for humidity sensor changes.  </p>
<p>For more information about writing Siddhi Apps visit <a href="https://wso2.github.io/siddhi/">here</a></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../.." title="Welcome to Siddhi Android Platform" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Welcome to Siddhi Android Platform
              </span>
            </div>
          </a>
        
        
          <a href="../../license/" title="License" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                License
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2011 - 2017 WSO2
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/wso2/siddhi-android-platform" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.linkedin.com/groups/13553064" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-103065-28","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>